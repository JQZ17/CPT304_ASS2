<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312">
    <title>Please select the code for the country you want to find </title>
    <style type="text/css">
        <!--
        .style1 {color: #FFFFFF}
        -->
    </style>
    <script type="text/javascript">
        var counts;
        counts=0;
        var countrySlected = "";
        var countrylist = new Array();
        var holidaylist = new Array();
        arr = new Array("JavaScript and ASP","JavaScript and JSP","JavaScript and ASP.NET","JavaScript and PHP");
        counts=arr.length;
        function Myselect(){
            fetch("https://referential.p.rapidapi.com/v1/country?fields=currency%2Ccurrency_num_code%2Ccurrency_code%2Ccontinent_code%2Ccurrency%2Ciso_a3%2Cdial_code", {
                "method": "GET",
                "headers": {
                    "x-rapidapi-key": "7341c491fbmsh5633f4a3be4d132p156dc4jsnca9d501d0897",
                    "x-rapidapi-host": "referential.p.rapidapi.com"
                }
            })
                .then(response => {
                    return response.json();  // 先将结果转换为 JSON 对象
                })
                .then(data => {
                    var num = 0;
                    for (i in data){
                        countrylist[num] = data[i].value + "," + data[i].key;
                        num = num + 1;
                    }
                    var i;
                    for (i=0;i < countrylist.length; i++) {
                        document.form1.sel.options[i] = new Option(countrylist[i],i);
                    }
                    console.log(data);
                })
                .catch(err => {
                    console.error(err);
                });

        }
        function Getholiday(){
            var mySelect1 =  document.getElementById("sel");
            var index = mySelect1.selectedIndex;
            countrySlected = mySelect1.options[index].text;
            var countryInfo = countrySlected.split(",");
            var queryLink = "https://public-holiday.p.rapidapi.com/2021/" + countrySlected[1];
            fetch(queryLink, {
                "method": "GET",
                "headers": {
                    "x-rapidapi-key": "7341c491fbmsh5633f4a3be4d132p156dc4jsnca9d501d0897",
                    "x-rapidapi-host": "public-holiday.p.rapidapi.com"
                }
            })
                .then(response => {
                    return response.json();
                })
                .then(data => {
                    var num = 0;
                    for (i in data){
                        holidaylist[num] = data[i].name;
                        num = num + 1;
                    }
                    document.getElementById("codeInput").value = holidaylist[1];
                    console.log(data);
                })
                .catch(err => {
                    console.error(err);
                });
        }
    </script>
</head>
<body>
<table width="600" height="100" border="1">
    <tr>
        <th>Select country code</th>
        <th>get the countries' public holiday</th>
    </tr>
    <tr>
        <td align="center" valign="top" ><form name="form1">
            <table width="235" height="69" border="0" align="center" cellpadding="0" cellspacing="0">
                <tr>
                    <td height="21"><select name="sel" id="sel" onFocus="Myselect()">
                    </select></td>
                </tr>
            </table>
        </form></td>
        <td><input id="button1" type="button" value="click" onclick="Getholiday()"/></td>
    </tr>
</table>
<table  width="600" height="100" border="1">
    <tr><th>the country code selected</th></tr>
    <tr><td><input  id="codeInput" type="text" value="Hi~"/></td></tr>
</table>
</body>
